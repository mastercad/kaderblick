{% extends 'base.html.twig' %}

{% block title %}News erstellen{% endblock %}

{% block body %}
<div class="container">
    <h1>News erstellen</h1>
    
    <form method="post">
        <div class="mb-3">
            <label for="title" class="form-label">Titel</label>
            <input type="text" class="form-control" id="title" name="title" required>
        </div>
        
        <div class="mb-3">
            <label for="content" class="form-label">Inhalt</label>
            <textarea class="form-control" id="content" name="content" rows="5" required></textarea>
        </div>
        
        <div class="mb-3">
            <label for="visibility" class="form-label">Sichtbarkeit</label>
            <select class="form-control" id="visibility" name="visibility" required>
                {% for label, value in visibilityOptions %}
                    <option value="{{ value }}">{{ label }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="mb-3" id="club-select" style="display: none;">
            <label for="club_id" class="form-label">Verein</label>
            <select class="form-control" id="club_id" name="club_id">
                <option value="">Bitte wählen...</option>
                {% for id, club in clubs %}
                    <option value="{{ id }}">{{ club.name }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="mb-3" id="team-select" style="display: none;">
            <label for="team_id" class="form-label">Team</label>
            <select class="form-control" id="team_id" name="team_id">
                <option value="">Bitte wählen...</option>
                {% for id, team in teams %}
                    <option value="{{ id }}">{{ team.name }}</option>
                {% endfor %}
            </select>
        </div>
        
        <button type="submit" class="btn btn-primary">Absenden</button>
        <a href="{{ path('app_news_index') }}" class="btn btn-secondary">Zurück</a>
    </form>
</div>

<script>
document.getElementById('visibility').addEventListener('change', function() {
    var visibility = this.value;
    var clubSelect = document.getElementById('club-select');
    var teamSelect = document.getElementById('team-select');
    
    clubSelect.style.display = visibility === 'club' ? 'block' : 'none';
    teamSelect.style.display = visibility === 'team' ? 'block' : 'none';
});
</script>
{% endblock %}
